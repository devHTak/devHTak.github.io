---
layout: post
title: HTTP 완벽 가이드 3장. HTTP 메시지
summary: HTTP 완벽 가이드
author: devhtak
date: '2021-01-03 23:41:00 +0900'
category: HTTP 완벽 가이드
---

0. 배우게 될 것

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분(시작줄, 헤더, 본문)
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능(메서드)들
- 응답 메시지가 반환하는 여러 상태 코드들
- 여러 HTTP 헤더들은 무슨 일을 하는가

3.1 메시지의 흐름

- 메시지는 원 서버 방향을 인바운드로 하여 송신된다.
  - 인바운드와 아웃바운드는 트랜잭션 방향을 표현하기 위해 사용
  - 클라이언트 -> 서버: 인바운드
  - 서버 -> 클라이언트: 아웃바운드
  
- 다운 스트림으로 흐르는 메시지
  - 모든 메시지는 다운스트림으로 흐른다. 발송자는 수신자의 업스트림이다.
  
3.2 메시지의 각 부문

- 메시지는 시작줄, 헤더 블록, 본문으로 나뉜다.
  - 시작줄은 어떤 메시지인지 서술하며, 헤더 블록은 속성, 본문은 데이터를 담고 있다.
  - 시작줄: HTTP/1.0 200 Ok , 헤더: Content-type: text/plain Content-length: 19, 본문: Hi! I'm a message!
  
- 메시지 문법
  - 모든 HTTP 메시지는 요청, 응답으로 분류된다.
  - 요청 메시지 형식
    <메서드> <요청 URL> <버전>
    <헤더>
    <엔터티 본문>
  - 응담 메시지 형식
    <버전> <상태 코드> <사유 구절>
    <헤더>
    <엔터티 본문>
    
  - 메서드
    - 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작으로 POST, GET, PATCH, DELETE 등이 있다.
  
  - 요청 URL
    - 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성 요소
    
  - 버전
    - 메시지의 사용중인 HTTP의 버전
    - HTTP/<메이저>.<마이너>
    
  - 상태 코드
    - 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자
    
  - 사유 구절
    - 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있도록 설명해주는 짧은 문구로, 상태 코드 이후부터 줄바꿈 문자열까지가 사유 구절이다.
    
  - 헤더들
    - 이름, 콜론(:), 선택적인 공백, 값, CRLF가 순서대로 나타나는 0개 이상의 헤더들
    - 이 헤더의 목록은 빈 줄(CRLF)로 끝나 헤더 목록의 끝과 엔터티 본문의 시작을 표시
    
  - 엔터티 본문
    - 엔터티 본문은 임의의 데이터 블록을 포함한다.
    - 헤더나 엔터티 본문이 없더라도 HTTP 헤더의 집합은 항상 빈줄(그냥 CRLF)로 끝나야 한다. 하지만 호환을 위해 클라이언트와 서버에서는 마지막 CRLF가 없어도 받아들일 수 있어야 한다.
    
- 시작줄
  - 모든 HTTP 메시지는 시작줄로 시작한다.
  - 요청 메시지의 시작줄은 무엇을 해야 하는지 말해준다.
  - 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다.
  
  - 요청줄
    - 요청 메시지는 서버에게 리소스에 대해 무언가를 해달라고 부탁한다.
    - 메서드, 요청 URL, HTTP 버전이 포함되며 공백으로 구분된다.
    
  - 응답줄
    - 응답 메시지는 수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려준다.
    - HTTP 버전, 상태코드, 사유구절이 포함되며 공백으로 구분한다.
    
  - 메서드
    - 요청의 시작줄의 메서드로 시작하며, 서버에게 무엇을 해야 하는지 말해준다.
  
  - 상태 코드
    - 응답의 시작줄에 위치하며 클라이언트에게 무엇이 일어났는지 말해준다.
    
  - 사유 구절
    - 상태 코드에 대한 글로된 설명을 제공
    
  - 버전 번호
    - HTTP/x.y 형식으로 요청과 응답 메시지 양쪽 모두에 기술된다.
    - HTTP 애플리케이션들이 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단
    - 버전 번호는 분수로 다뤄지지 않는다.
      - HTTP/1.0 에서 1과 0은 분리된 숫자로 다뤄진다.
      - HTTP/2.22 는 HTTP/2.3보다 크다 22가 3보다 크기 때문이다.

- 헤더
  - 시작줄 다음에는 0개, 1개 또는 여러 개의 HTTP 헤더가 온다.
  - 헤더 분류
    - 일반 헤더: 요청과 응답 양쪽에 모두 나타낼 수 있다.
    - 요청 헤더: 요청에 대한 부가 정보 제공
    - 응답 헤더: 응답에 대한 부가 정보 제공
    - Entity 헤더: 본문 크기와 콘텐츠 혹은 시소스 그 자체 서술
    - 확장 헤더: 명세에 정의되지 않은 새로운 헤더
  - 헤더를 여러 줄로 나누기
    - 긴 헤더 줄은 여러 줄로 쪼갤 수 있는데, 추가 줄앞에는 최소 하나의 스페이스 또는 탭 문자가 와야 한다.
    
- 엔터티 본문
  - 엔터티 본문은 HTTP 메시지의 화물이라고 할 수 있으며 HTTP가 수송하도록 설계된 것들이다.
    
    

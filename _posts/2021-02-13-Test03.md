---
layout: post
title: TDD 좀 더 잘하기
summary: 테스트주도개발 TDD실천법과 도구
author: devhtak
date: '2021-02-13 22:41:00 +0900'
category: Test
---

#### 체크 리스트

- 테스트 클래스의 위치
- 테스트 메소드 작성 방식
- 테스트 케이스 접근 방식
- TDD의 한계

#### 테스트 클래스의 위치

- 테스트 대상 소스와 테스트 클래스를 같은 곳에
  - src/bank/Account.java + src/bank/AccountTest.java
  - 테스트 클래스와 같은 패키지에 놓는 가장 기본적인 형태
  - 간단한 테스트를 만들 때 외에는 잘 사용하지 않는다.
  
  |장점|클래스 이름 규칙을 잘 정했을 경우 테스트 클래스를 찾기 쉽다.|
  |단점|패키지 내에 제품 코드 클래스와 테스트 클래스가 함께 존재하기 때문에 혼란을 줄 수 있다. 배포 시에 테스트 클래스만 발췌해야 하는 불편함이 있다.|
  |선호도|낮음|
  
- 테스트 클래스는 하위 패키지로
  - src/bank/Account.java + src/bank/test/AccountTest.java
  - 대상 소스의 하위에 테스트 패키지를 만든는 방법
  
  |장점|테스트 코드가 가까운 곳에 위치한다.|
  |단점|이미 하위 패키지가 존재할 경우에는 혼란스러울 수 있다. 테스트 클래스와 제품 클래스를 따로 분리하여 배포하는 데 어려움이 있다.|
  |선호도|낮음, 지금은 거의 사용하지 않는다.|
  
- 최상위 패키지를 분리
  - /src/main/Account.java + /src/test/AccountTest.java
  - 최상위 패키지부터 업무 코드와 테스트 코드를 분리해서 작성할 수 있게 만들어 준다.
  
  |장점|업무 코드와 테스트 코드가 섞일 염려가 없다. 테스트 코드만 분리해내기 쉽다.|
  |단점|default나 protected로 선언된 메소드들에 대해 테스트 코드를 작성할 수 없다. 어쨌든 배포 시나 패키징시에 test 패키지 이하를 따로 발췌해내야 한다.|
  |선호도|보통|
  
- 테스트를 프로젝트로 분리
  - Bank Buisiness Project + Bank Buisiness Test Project
  - 외부 라이브러리 의존 관계를 좀 더 확실하게 구분하고자 프로젝트 단위로 분리
  - 컴포넌트식 개발과 테스트에 흔히 쓰이는 방식
  
  |장점|제품 코드와 테스트 케이스 코드의 외부 라이브러리 의존 관계를 명확히 분리해낸다. 제품 코드와 테스트 코드를 프로젝트 레벨로 개별적 배포가 용의|
  |단점|환경 구성 방법이 IDE에 의존적이 된다. Ant 스크립트 등의 외부 툴을 함께 쓸 경우, 클래스패스 관련해서 스크립트 작성이 번거롭다.|
  |선호도|프로젝트 라이브러리에 대해 상세화된 전권행사(Detailed Full control)을 원하는 개발자에게 추천|
  
- Maven 스타일
  - 패키지 구조
    - src/main/java + src/main/resources + src/test/java + src/test/resources
  - 실제 폴더 구조에는 클래스 파일 생성 경로
    - target/classes + target/test-classes
  
  |src/main/java|제품 코드가 들어가는 위치|
  |src/main/resources|제품 코드에서 사용하는 각종 파일, XML 등의 리소스 파일들|
  |src/test/java|테스트 코드가 들어가는 위치|
  |src/test/resources|테스트 코드에서 사용하는 각종 파일, XML 등의 리소스 파일들|
